<html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Документация по MobileCMS</title>
	<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body><div class="navheader">
<table width="100%" summary="Navigation header">
	<tr>
		<th align="center">Документация по MobileCMS</th>
	</tr>
	<tr>
		<th align="center">Методы модуля main</th>
	</tr>
</table>
<hr />
</div>
    
<div class="refsect1">
	<h2>Описание</h2>
	<p class="classname">
		Методы модуля main находятся в файле <strong class="command">modules/main/helpers/main.php</strong>, они предназначены для упрощения каких-либо часто выполняемых задач.
	</p>
</div>

<div class="refsect1">
	<h2>Список наиболее употребляемых методов</h2>
	<dl>
		<dt>
			<span class="term">main::wtext(string str)</span>
		</dt>
		<dd>
			<p>Предназначена для смены кодировки строки <strong class="command">$str</strong> из utf-8 в cp-1251</p>
		</dd>
		<dt>
			<span class="term">main::utext(string str)</span>
		</dt>
		<dd>
			<p>Предназначена для смены кодировки строки <strong class="command">$str</strong> из cp-1251 в utf-8</p>
		</dd>
		<dt>
			<span class="term">main::get_unique_code([int length])</span>
		</dt>
		<dd>
			<p>Служит для генерации случайной строки длиной $lenght, но не более 32 символов.</p>
		</dd>
		<dt>
			<span class="term">main::translite(string str)</span>
		</dt>
		<dd>
			<p>Преобразование строки из транслита в кирилицу</p>
		</dd>
		<dt>
			<span class="term">main::end_str(int count, string k_1, string k_234, string k_many)</span>
		</dt>
		<dd>
			<p>Подстраивает нужное окончание</p>
			<div class="programlisting" style="margin-left: 0px;">
				echo 5 .' '. main::end_str(5, 'штука', 'штуки', 'штук');
			</div>
			<p>Выведет</p>
			<div class="programlisting" style="margin-left: 0px;">
				5 штук
			</div>
		</dd>
		<dt>
			<span class="term">main::strlen(string str)</span>
		</dt>
		<dd>
			<p>Возвращает длину строки для utf-8 (заменяет mb_strlen)</p>
		</dd>
		<dt>
			<span class="term">main::substr(string str, int start [, int lenght])</span>
		</dt>
		<dd>
			<p>Аналог php функции substr(), корректно работающая с utf-8</p>
		</dd>
		<dt>
			<span class="term">main::limit_words(string str, int limit)</span>
		</dt>
		<dd>
			<p>Обрезание части строки по словам</p>
			<div class="programlisting" style="margin-left: 0px;">
				$string = "MobileCMS - система управления контентом мобильных сайтов";<br />
				echo main::limit_words($string, 4);
			</div>
			<p>Выведет</p>
			<div class="programlisting" style="margin-left: 0px;">
				MobileCMS - система управления
			</div>
		</dd>
		<dt>
			<span class="term">main::delete_dir(string dir [, bool clear])</span>
		</dt>
		<dd>
			<p>Рекурсивное удаление не пустой папки, если второй параметер равен <strong class="command">true</strong> папка будет очищена от файлов и папок, но удаление самой папки не произойдет</p>
		</dd>
		<dt>
			<span class="term">main::byte_format(mixed num)</span>
		</dt>
		<dd>
			<p>Формирует строку на основе полученного числа как количества байтов. Так же добавляется суффикс. Взята из CodeIgniter.</p>
			<div class="programlisting" style="margin-left: 0px;">
				echo byte_format(456); // Возвращает 456 Bytes<br />
				echo byte_format(4567); // Возвращает 4.5 KB<br />
				echo byte_format(45678); // Возвращает 44.8 KB<br />
				echo byte_format(456789); // Возвращает 447.8 KB<br />
				echo byte_format(3456789); // Возвращает 3.3 MB<br />
				echo byte_format(12345678912345); // Возвращает 1.8 GB<br />
				echo byte_format(123456789123456789); // Возвращает 11,228.3 TB		
			</div>
		</dd>
		<dt>
			<span class="term">main::image_resize(string infile, string outfile [, int neww [, int newh [, int quality]]])</span>
		</dt>
		<dd>
			<p>Функция изменяет формат, размеры и качество изображений</p>
			<ul>
				<li><strong class="command">$infile</strong> - исходный файл изображения</li>
				<li><strong class="command">$outfile</strong> - получаемый файл изображения</li>
				<li><strong class="command">$neww</strong> - новая ширина изображения (не обязательный параметр)</li>
				<li><strong class="command">$newh</strong> - новая высота изображения (не обязательный параметр)</li>
				<li><strong class="command">$quality</strong> - новое качество изображения (не обязательный параметр)</li>
			</ul>
			<div class="programlisting" style="margin-left: 0px;">
				main::image_resize(ROOT .'tmp/src.gif', ROOT .'tmp/dest.jpg', 100, 80, 80);	
			</div>
		</dd>
		<dt>
			<span class="term">main::add_event(string module, string place)</span>
		</dt>
		<dd>
			<p>Добавляет новое событие модуля <strong class="command">$module</strong> в место <strong class="command">$place</strong>. Применяется в инсталляторе модуля.</p>
		</dd>
		<dt>
			<span class="term">main::delete_event(string module)</span>
		</dt>
		<dd>
			<p>Удаляет все события модуля <strong class="command">$module</strong>. Применяется в инсталляторе модуля при деинсталляции.</p>
		</dd>
	</dl>
</div>

<div><br /><br /></div>

<div class="navfooter"><hr />
	<table width="100%" summary="Navigation footer">
		<tr>
			<td width="40%" align="left"><a href="dev.general_functions.html">Пред</a></td>
			<td width="20%" align="center"><a href="index.html">На уровень выше</a></td>
			<td width="40%" align="right"><a href="dev.module_main.html">След</a></td>
		</tr>
		<tr>
			<td width="40%" align="left" valign="top">Главные методы ядра</td>
			<td width="20%" align="center">Содержание</td>
			<td width="40%" align="right" valign="top">Методы модуля main</td>
		</tr>
	</table>
</div>
    
</body>
</html>